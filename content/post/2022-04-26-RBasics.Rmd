---
title: "RBasics"
author: ''
date: '2022-04-26'
output:
  html_document:
    highlight: textmate
    theme: simplex
    toc: yes
  pdf_document:
    toc: yes
categories:
- data manipulations
- data visualizations
tags:
- dplyr
- ggplot2
slug: RBasics
jupyter:
  jupytext:
    formats: ipynb,Rmd,md
    text_representation:
      extension: .Rmd
      format_name: rmarkdown
      format_version: '1.2'
      jupytext_version: 1.13.7
  kernelspec:
    display_name: R
    language: R
    name: ir
---

```{r}
install.packages(c("formatR", "jsonlite"), repos="http://cran.rstudio.com")

```

<!-- #region slideshow={"slide_type": "slide"} toc=true -->
<h1>Table of Contents<span class="tocSkip"></span></h1>
<div class="toc"><ul class="toc-item"><li><span><a href="#Types-of-Operators" data-toc-modified-id="Types-of-Operators-1">Types of Operators</a></span><ul class="toc-item"><li><span><a href="#Logical-AND-(&amp;&amp;)-and-Logical-OR-(||)" data-toc-modified-id="Logical-AND-(&amp;&amp;)-and-Logical-OR-(||)-1.1">Logical AND (<code>&amp;&amp;</code>) and Logical OR (<code>||</code>)</a></span></li><li><span><a href="#%in%-Operator" data-toc-modified-id="%in%-Operator-1.2"><code>%in%</code> Operator</a></span></li></ul></li><li><span><a href="#Control-Structures-or-Conditional-Statements" data-toc-modified-id="Control-Structures-or-Conditional-Statements-2">Control Structures or Conditional Statements</a></span><ul class="toc-item"><li><ul class="toc-item"><li><span><a href="#If-Condition" data-toc-modified-id="If-Condition-2.0.1">If Condition</a></span></li><li><span><a href="#If..Else" data-toc-modified-id="If..Else-2.0.2">If..Else</a></span></li><li><span><a href="#If...Else...If" data-toc-modified-id="If...Else...If-2.0.3">If...Else...If</a></span></li></ul></li><li><span><a href="#For-and-While" data-toc-modified-id="For-and-While-2.1">For and While</a></span><ul class="toc-item"><li><span><a href="#For-Loop" data-toc-modified-id="For-Loop-2.1.1">For Loop</a></span></li><li><span><a href="#While-Loop" data-toc-modified-id="While-Loop-2.1.2">While Loop</a></span></li></ul></li><li><span><a href="#repeat,-break,-next-and-switch" data-toc-modified-id="repeat,-break,-next-and-switch-2.2">repeat, break, next and switch</a></span><ul class="toc-item"><li><span><a href="#Repeat-statement" data-toc-modified-id="Repeat-statement-2.2.1">Repeat statement</a></span></li><li><span><a href="#Break-Statement" data-toc-modified-id="Break-Statement-2.2.2">Break Statement</a></span></li><li><span><a href="#Next-Statment" data-toc-modified-id="Next-Statment-2.2.3">Next Statment</a></span></li><li><span><a href="#Switch-Statment" data-toc-modified-id="Switch-Statment-2.2.4">Switch Statment</a></span></li></ul></li></ul></li><li><span><a href="#Vectorization-and-recycling-concepts" data-toc-modified-id="Vectorization-and-recycling-concepts-3">Vectorization and recycling concepts</a></span></li></ul></div>
<!-- #endregion -->

<!-- #region slideshow={"slide_type": "slide"} -->
# Types of Operators
<!-- #endregion -->

<!-- #region slideshow={"slide_type": "subslide"} -->
Arithmetic Operators  `(+  -  *  /  %%` (modulo)  `%/%`(integer divide) ` ^`(raised to the power of))  
Relational Operators`(>  <  <=  >=  ==  !=  )`         
Logical Operators   `(&  |  !  &&  ||)`  
Assignment Operators `(<−  =  <<−  ->  ->>)`  
Miscellaneous Operators `(:  %in%  %*%)`
<!-- #endregion -->

```{r active="", eval=FALSE}
Arithmetic Operators

Operator    Description       Example
-           Subtraction       5 - 1 = 4
+           Addition          5 + 1 = 6
*           Multiplication    5 * 3 = 15
/           Division          10 / 2 = 5
^ or **     Exponentiation    2*2*2*2*2 as 2 to the power of 5
x%%y        Modulus           5%%2 is 1
x%/%y       Integer Division  5%/%2 is 2
```

```{r active="", eval=FALSE}
Relational and Logical Operators

Operator     Description                 Example
<            less than                   5 < 10
<=           less than or equal to       <= 5
>            greater than                10 > 5
>=           greater than or equal to    >= 10
==           exactly equal to            == 10
!=           not equal to                != 5
!x           not x                       x <- c(5), !x
x | y        x or y                      x <- c(5), y <- c(10), x | y
x & y        x and y                     x <- c(5), y <- c(10), x & y
isTRUE(x)    tests whether x is true     x <- TRUE, isTRUE(x)
                                                    [1] FALSE
```

<!-- #region slideshow={"slide_type": "slide"} -->
## Logical AND (`&&`) and Logical OR (`||`)
<!-- #endregion -->

```{r slideshow={'slide_type': 'subslide'}}
# Called Logical AND operator. Takes first element of both the vectors and gives the TRUE only if both are TRUE.
v <- c(3,0,TRUE,2+2i)
t <- c(1,3,TRUE,2+3i)
print(v&&t)
```

```{r slideshow={'slide_type': 'subslide'}}
# Called Logical OR operator. Takes first element of both the vectors and gives the TRUE if one of them is TRUE.
v <- c(0,0,TRUE,2+2i)
t <- c(0,3,TRUE,2+3i)
print(v||t)
```

<!-- #region slideshow={"slide_type": "slide"} -->
## `%in%` Operator
<!-- #endregion -->

```{r slideshow={'slide_type': 'subslide'}}
# This operator is used to identify if an element belongs to a vector.

v1 <- 8
v2 <- 12
t <- 1:10
print(v1 %in% t) 
print(v2 %in% t)
```

<!-- #region slideshow={"slide_type": "slide"} -->
# Control Structures or Conditional Statements

(decision making statements)
<!-- #endregion -->

<!-- #region slideshow={"slide_type": "slide"} -->
![Imgur](https://i.imgur.com/YQfqXlY.png?1)
<!-- #endregion -->

<!-- #region slideshow={"slide_type": "slide"} -->
### If Condition
**IF statement associates a condition with a sequence of statements, The sequence of statements is executed only if the condition is true. If the condition is false or null, the IF statement does nothing. In either case, control passes to the next statement**
<!-- #endregion -->

```{r run_control={'frozen': False, 'read_only': False}, slideshow={'slide_type': 'slide'}}
num1=10
num2=20
 
if(num1<=num2){
print("Num1 is less or equal to Num2")
    }
```

<!-- #region slideshow={"slide_type": "slide"} -->
### If..Else
<!-- #endregion -->

```{r run_control={'frozen': False, 'read_only': False}, slideshow={'slide_type': 'subslide'}}
x <- 1:15
if (sample(x, 1) <= 10) {
    print("x is less than 10")
} else {
    print("x is greater than 10")
}
```

<!-- #region slideshow={"slide_type": "subslide"} -->
**Another way in R**
<!-- #endregion -->

```{r run_control={'frozen': False, 'read_only': False}, slideshow={'slide_type': 'subslide'}}
x <- 1:15
ifelse(x <= 10, "x less than 10", "x greater than 10")
```

<!-- #region slideshow={"slide_type": "slide"} -->
### If...Else...If
<!-- #endregion -->

```{r slideshow={'slide_type': 'subslide'}}
if (10==10)
    print('10 is equal to 10') else
    print('invalid')
```

```{r slideshow={'slide_type': 'subslide'}}
x <- 3
y <- if(x>2){0}else{1}
y
```

```{r slideshow={'slide_type': 'subslide'}}
z <- 1:10
ifelse(z<2 | z>8, 1, 0)
```

```{r slideshow={'slide_type': 'subslide'}}
ifelse(z>5,'TRUE','FALSE')
```

```{r slideshow={'slide_type': 'subslide'}}
z <- 1:10
ifelse(z>4&z>8,"x","?")
```

```{r run_control={'frozen': False, 'read_only': False}, slideshow={'slide_type': 'subslide'}}
x <- c("what","is","truth")

if("Truth" %in% x) {
   print("Truth is found the first time")
} else if ("truth" %in% x) {
   print("truth is found the second time")
} else {
   print("No truth found")
}
```

<!-- #region slideshow={"slide_type": "slide"} -->
## For and While
<!-- #endregion -->

<!-- #region slideshow={"slide_type": "slide"} -->
### For Loop
To repeats a statement or group of for a fixed number of times.
<!-- #endregion -->

```{r run_control={'frozen': False, 'marked': False, 'read_only': False}, slideshow={'slide_type': 'subslide'}}
vector <- c("aaa","bbb","ccc")
 for(i in vector){   
   print(i)   
}    
```

```{r slideshow={'slide_type': 'subslide'}}
for (year in c(2010,2011,2012,2013,2014,2015)){
  print(paste("The year is", year))
}
```

```{r slideshow={'slide_type': 'subslide'}}
for(i in 2:5){
    z <- i +1
    print(z)
}
```

<!-- #region slideshow={"slide_type": "subslide"} -->
| Instead of  | Use          |
|-------------|--------------|
| 1:length(x) | seq_along(x) |
| 1:n         | seq_len(n)   |
<!-- #endregion -->

```{r slideshow={'slide_type': 'subslide'}}
x <- c('a', 'b', 'c', 'd')
for (i in seq_along(x)){
    print(x[i])
}

#alternatively
for (words in x){
    print(words)
}
```

```{r slideshow={'slide_type': 'subslide'}}
mymat <- matrix(1:9,3,3)
mymat

for (i in seq_len(nrow(mymat))){
    for (j in seq_len(ncol(mymat))){
        print(mymat[i,j])
    }
}
```

```{r slideshow={'slide_type': 'subslide'}}
x <- head(women,10)
x
mrnull <- NULL
for(i in seq_along(x[,1])){
    concat <- c(mrnull, mean(as.numeric(x[i, 1:2])))
    print(concat)
}

```

```{r slideshow={'slide_type': 'subslide'}}
# Create your three-dimensional array
my_array <- array(1:20, dim=c(20, 20, 20))

for (i in 1:dim(my_array)[1]) {
  for (j in 1:dim(my_array)[2]) {
    for (k in 1:dim(my_array)[3]) {
      my_array[i,j,k] = i*j*k
    }
  }
}

# Show a 10x10x15 chunk of your array
print(my_array[1:10, 1:10, 1:15])
```

<!-- #region slideshow={"slide_type": "slide"} -->
### While Loop
Loop until a specific condition is met
<!-- #endregion -->

```{r run_control={'frozen': False, 'read_only': False}, slideshow={'slide_type': 'subslide'}}
i <- 1

while (i < 6) {
   print(i)
   i = i+1
}
```

```{r slideshow={'slide_type': 'subslide'}}
a <- 0
b <- 1
print(a)
while (b < 50) {
    print(b)
    temp <- a + b
    a <- b
    b <- temp
}
```

```{r slideshow={'slide_type': 'subslide'}}
a <- 0
b <- 1
print(a)
while (b < 50) {
     print(b)
     temp <- a + b
     a <- b
     b <- temp
}
```

<!-- #region slideshow={"slide_type": "slide"} -->
## repeat, break, next and switch
<!-- #endregion -->

<!-- #region slideshow={"slide_type": "slide"} -->
### Repeat statement
Iterate over a block of code multiple number of times.
<!-- #endregion -->

```{r run_control={'frozen': False, 'read_only': False}, slideshow={'slide_type': 'subslide'}}
x <- 1

repeat {
   print(x)
   x = x+1
   if (x == 6){
       break
   }
}
```

<!-- #region slideshow={"slide_type": "slide"} -->
### Break Statement
break is used inside any loop like `repeat`, `for` or `while` to stop the iterations and flow the control outside of the loop.
<!-- #endregion -->

```{r run_control={'frozen': False, 'read_only': False}, slideshow={'slide_type': 'subslide'}}
x <- 1:5

for (val in x) {
    if (val == 3){
        break
    }
    print(val)
}
```

```{r slideshow={'slide_type': 'subslide'}}
x <- 1:10
for (num in x){
    if (num==6) break
    mynum <- paste(num, "and so on. ", sep = " ")
    print(mynum)
}
```

<!-- #region slideshow={"slide_type": "slide"} -->
### Next Statment
* Useful to controls the flow of R loops  
* generaal usage inside the For Loop and While Loop  
<!-- #endregion -->

<!-- #region slideshow={"slide_type": "subslide"} -->
**Example:**
<!-- #endregion -->

```{r run_control={'frozen': False, 'read_only': False}, slideshow={'slide_type': 'subslide'}}
x <- 1:5

for (val in x) {
    if (val == 3){
        next
    }
    print(val)
}
```

```{r slideshow={'slide_type': 'subslide'}}
m=20
odd=numeric()

for (k in 1:m) {
   if (!k %% 2)
      next
      odd <- c(odd,k)
}
odd
```

```{r slideshow={'slide_type': 'subslide'}}
for (i in 1:10) {
  if (!i %% 2){
    next
  }
    print(i)
}
```

```{r slideshow={'slide_type': 'subslide'}}
x <- 1:10
for (num in x){
    if (num %% 3 == 1) next
    mynum <- paste(num, "and so on. ", sep = " ")
    print(mynum)
}
```

<!-- #region slideshow={"slide_type": "slide"} -->
### Switch Statment
**switch statement allows a variable to be tested for equality against a list of values. Each value is called a case**  

Syntax:
```r
switch (Expression, "Option 1", "Option 2", "Option 3", ....., "Option N") 
```
<!-- #endregion -->

<!-- #region slideshow={"slide_type": "subslide"} -->
**Examples:**
<!-- #endregion -->

* If the value evaluated is a number, that item of the list is returned.

```{r}
switch(2,"red","green","blue")
# [1] "green"
switch(1,"red","green","blue")
# [1] "red"
################
x <- "red"
switch(x, red="cloth", size=5, name="table")
#################
# If the numeric value is out of range (greater than the number of items in the list or smaller than 1), then, 
# NULL is returned.
 x <- switch(4,"red","green","blue")
 x
 x <- switch(0,"red","green","blue")
 x
```

```{r run_control={'frozen': False, 'read_only': False}, slideshow={'slide_type': 'subslide'}}
number1 <- 30
number2 <- 20
operator <- readline(prompt="Please enter any ARITHMETIC OPERATOR You wish!: ")
 
switch(operator,
       "+" = print(paste("Addition of two numbers is: ", number1 + number2)),
       "-" = print(paste("Subtraction of two numbers is: ", number1 - number2)),
       "*" = print(paste("Multiplication of two numbers is: ", number1 * number2)),
       "^" = print(paste("Exponent of two numbers is: ", number1 ^ number2)),
       "/" = print(paste("Division of two numbers is: ", number1 / number2)),
       "%/%" = print(paste("Integer Division of two numbers is: ", number1 %/% number2)),
       "%%" = print(paste("Division of two numbers is: ", number1 %% number2))
)
```

<!-- #region slideshow={"slide_type": "slide"} -->
<span style="color:red">**Conclusion**</span>

**Loops are not recommended until and unless its really needed, since R has vectorisation feature**
<!-- #endregion -->

```{r run_control={'frozen': False, 'read_only': False}, slideshow={'slide_type': 'subslide'}}
# let us take a vector 
vect <- c(1,2,3,4,5,6,7,9)
# now we multiply each element of vect with 5
print(vect * 5)
# now we add each element of vect with 5
print(vect + 5)
# now we subtract each element of vect with 5
print(vect - 5)
```

<!-- #region slideshow={"slide_type": "slide"} -->
# Vectorization and recycling concepts
<!-- #endregion -->

**Vectorized Operations**


* when you apply a function to a vector, it applies the function to every element of the vector.
* All the mathematical operators, like +, -, *, and the logical operators, like & (AND), | (OR), and the comparison operators, like < and > are hungry to operate element-wise on every element of a vector.

```{r}
For example, to add pairs of numbers contained in two vectors
```

```{r}
first <- c(86, 42, 123, -45)
second <- c(78, 210, 48, 52)
first * 5 # with scalar
second / 2.3
first + second # vector with another vector
first * second
first - second
first/second
```

```{r}
a <- 1:10
b <- 1:10
```

```{r}
res <- numeric(length = length(a))
for (i in seq_along(a)) {
  res[i] <- a[i] + b[i]
}
res
```

Instead, `+` is a vectorized function which can operate on entire vectors at once

```{r}
res2 <- a + b
res2
all.equal(res, res2)
```

**Vector Recycling**


* R likes to operate on vectors of the same length
*  if it encounters two vectors of different lengths in a binary operation, it recycles the smaller vector until it is the same length as the longest vector.
* It gives some warning, but still returns the output.
* If you perform an operation on two or more vectors of unequal length, R will recycle elements of the shorter vector(s) to match the longest vector.
* When R reaches the end of the shorter vector `b`, it starts again at the first element of `b` and continues until it reaches the last element of the longest vector `a`.

```{r}
a <- 1:10
b <- 1:5
a + b
```

```{r}
a <- 1:10
b <- 5
a * b # here b  is a vector of length 1 
```

* When the length of the longer object is a multiple of the shorter object length (as in our example above), the recycling occurs silently. When the longer object length is not a multiple of the shorter object length, a warning is given:

```{r}
a <- 1:10
b <- 1:7
a + b
```

```{r}
df <- data.frame(x = 1:3, y = c("a", "b", "c"))
df
df1 <- cbind(df, 1) 
print(df1)
```

```{r}
head(mtcars)
```

<!-- #region slideshow={"slide_type": "notes"} -->
<span style="color:red; font-family:Comic Sans MS">Sources & References</span>    
<a href="https://www.tutorialgateway.org/r-programming/" target="_blank">https://www.tutorialgateway.org/r-programming//</a>  
<a href="https://swcarpentry.github.io/r-novice-inflammation/15-supp-loops-in-depth/" target="_blank">https://swcarpentry.github.io/r-novice-inflammation/15-supp-loops-in-depth/</a>  
<!-- #endregion -->
